{% extends 'base.html' %}
{% block right-panel-content %}


    <div class="header">
        <ul class="nav nav-pills navbar faq-tabbable">
            <li role="presentation" class="active"><a href="{% url 'message_boards' 1  1 %}">热门</a></li>
            <li role="presentation"><a href="{% url 'message_boards' 2 1 %}">最新</a></li>
            <li role="presentation"><a href="{% url 'message_boards' 3 1 %}">点赞</a></li>
            <li role="presentation"><a href="{% url 'message_boards' 4 1 %}">收藏</a></li>
            <li role="presentation"><a href="{% url 'message_boards' 5 1 %}">我的</a></li>
        </ul>
    </div>
    <div class="container-fluid" align="center">
        <table class="table">
            <thead>
            <th style="width: 500px">标题</th>
            <th style="width: 100px">作者</th>
            <th style="width: 50px">浏览</th>
            <th style="width: 50px">点赞</th>
            <th style="width: 50px">回复</th>
            <th style="width: 100px">时间</th>
            </thead>
            <tbody>
            {% for i in  page.object_list %}
                <tr>
                    <td><a href="{% url 'get_message_board' i.id fap_id currentpage %}">{{ i.title }}</a></td>
                    <td>{{ i.user.name }}</td>
                    <td>{{ i.look_num }}</td>
                    <td>{{ i.like_num }}</td>
                    <td>{{ i.feebback_num }}</td>
                    <td>{{ i.create_time | date:'m-d H:i' }}</td>

                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% if not have_board %}
            <p style="color: #1db393">暂无帖子哦~~~</p>
        {% else %}
            {#分页器:html内容拷贝于bootstrap网站-组件-分页#}
            {# bootstrap是一整套成熟经典的页面组件框架 #}

        {% endif %}
    </div>

    <div class="container-fluid" align="center">
        <form role="form" action="{% url 'new_message_board' %}" method="post" onsubmit="return toVaild()">
            {% csrf_token %}
            <div class="form-group">
                <h3><label for="title">发布帖子</label></h3>
                <input type="text" id="title" class="form-control" style="width: 800px" name="title" maxlength="30"
                       placeholder="标题（最多30字）">
                {#                <label>内容:</label>#}
                <textarea id="board_content" name="content" class="form-control" rows="10" cols="240"></textarea>

            </div>
            <div style="width: 800px" align="center">
                <button class="btn btn-default btn-primary" style="margin-top: 10px" type="submit">点我发布</button>
            </div>

        </form>
    </div>
    <nav aria-label="Page navigation example" style="margin-top: 80px">
        <ul class="pagination justify-content-center">
            <li class="page-item ">
                {#上一页按钮开始#} {# 如果当前页有上一页#}
                {% if page.has_previous %}
                    <a class="page-link" href="{% url 'message_boards' fap_id page.previous_page_number %}">Previous</a>
                {% else %}
                    <a class="page-link disabled" href="#">Previous</a>
                {% endif %}
            </li>
            <li class="page-item">

                {# 页码按钮 #}
                {# 遍历传入的页码范围 #}
                {% for p in pagerange %}
                    {# 如果页码=当前页页码 #}
                    {% ifequal p currentpage %}
                        <a class="page-link" href="{% url 'message_boards' fap_id p %}">{{ p }}</a>
                    {% else %}
                        <a class="page-link" href="{% url 'message_boards' fap_id p %}">{{ p }}</a>
                    {% endifequal %}
                {% endfor %}
            </li>


            <li class="page-item">
                {% if page.has_next %}
                    <a class="page-link" href="{% url 'message_boards' fap_id page.next_page_number %}">Next</a>
                {% else %}
                    <a class="page-link" href="#">Next</a>{% endif %}
            </li>
        </ul>
    </nav>


    </div>
    <script src="/static/js/jquery.min.js"></script>
    <script src='/static/tiny_mce/tiny_mce.js'></script>
    <script type="text/javascript">
        tinyMCE.init({
            'mode': 'textareas',
            'theme': 'advanced',
            'width': 800,
            'height': 600,
            'language': 'zh',
            'style_formats': [
                {'title': 'Bold text', 'inline': 'b'},
                {'title': 'Red text', 'inline': 'span', 'styles': {'color': '#ff0000'}},
                {'title': 'Red header', 'block': 'h1', 'styles': {'color': '#ff0000'}},
                {'title': 'Example 1', 'inline': 'span', 'classes': 'example1'},
                {'title': 'Example 2', 'inline': 'span', 'classes': 'example2'},
                {'title': 'Table styles'},
                {'title': 'Table row 1', 'selector': 'tr', 'classes': 'tablerow1'}
            ],
        });

        $(function ($) {
            {#    导航栏按钮渲染#}
            $(".faq-tabbable").find("li").each(function () {
                var a = $(this).find("a:first")[0];
                if ($(a).attr("href") === location.pathname) {
                    $(this).addClass("active");
                } else {
                    $(this).removeClass("active");
                }
            });
        });

        function toVaild() {

            var title = document.getElementById("title").value;
            var content = document.getElementById("board_content").value;

            if (title.length === 0) {
                alert("标题与内容都不能为空");
                return false;
            } else {

                return true;
            }
        }
    </script>
{% endblock %}


